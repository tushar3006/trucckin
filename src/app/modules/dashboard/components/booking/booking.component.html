<div class="booking flex">
  <div class="fl-3 container create">

    <div *ngIf="activePath === typeConst.HOME">
      <h1 class="lighter">Create Booking</h1>

      <img src="/assets/images/create_booking.png" />

      <h4>Assignments</h4>
      <div class="text-grey lighter">
        You can create multiple assignments with respect to pick-up and drop-off locations.
      </div>


      <div class="cardWrapper">
        <div class="card assignment"
          *ngFor="let assignment of assignments">{{assignment | json}}</div>
        <div class="card"
          (click)="onAddAssignment()"> Add Assignment </div>
      </div>
    </div>

    <app-assignment (updateAssignment)="afterUpdateAssignment($event)"
      (updatePath)="changeActivePath($event)"
      [assignmentIndex]="activeAssignment"
      *ngIf="activePath === typeConst.ADD_ASSIGNMENT"></app-assignment>

    <app-truck-details (updatePath)="changeActivePath($event)"
      (updateTruckDetails)="afterUpdateTruckDetails($event)"
      *ngIf="activePath === typeConst.TRUCK_DETAILS"></app-truck-details>

    <app-schedule (updateSchedule)="afterUpdateSchedule($event)"
      (updatePath)="changeActivePath($event)"
      *ngIf="activePath === typeConst.SCHEDULE"></app-schedule>
  </div>
  <div class="fl-2">
    <agm-map #AgmMap
      [latitude]="lat"
      [longitude]="lng">
      <ng-component *ngFor="let assignment of assignments">
        <agm-polyline [strokeColor]="'#2196f3'"
          *ngIf="assignment.pickup && assignment.dropoff">

          <agm-polyline-point [latitude]="assignment.pickup.lat"
            [longitude]="assignment.pickup.lng">
          </agm-polyline-point>
          <agm-polyline-point [latitude]="assignment.dropoff.lat"
            [longitude]="assignment.dropoff.lng">
          </agm-polyline-point>

        </agm-polyline>
      </ng-component>
      <agm-marker *ngFor="let marker of markers"
        [latitude]="marker.lat"
        [longitude]="marker.lng"
        [label]="marker.label"></agm-marker>

    </agm-map>
  </div>
</div>
